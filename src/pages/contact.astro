---
import BaseLayout from "../layouts/BaseLayout.astro";
import { mobileTiresBrand } from "../brands";
import CtaButton from "../components/CtaButton.astro";
import FaqAccordion from "../components/FaqAccordion.astro";

const title = "Contact Us | Queens Auto Services";
const description =
    "Get in touch with Queens Auto Services for questions, quotes, or general inquiries.";

const faqs = [
    {
        question: "What are your hours of operation?",
        answer: "We're open Monday through Friday 7:30 AM - 6:00 PM, and Saturday 7:30 AM - 4:00 PM. We're closed on Sundays.",
    },
    {
        question: "Do you offer mobile tire installation?",
        answer: "Yes! We offer convenient mobile tire installation throughout Elgin and surrounding areas. Book through our appointment page.",
    },
    {
        question: "How do I schedule an appointment?",
        answer: "Visit our Request an Appointment page to book online, or give us a call at (224) 635-3000.",
    },
    {
        question: "What payment methods do you accept?",
        answer: "We accept all major credit cards, debit cards, and cash. We also offer financing options for larger repairs.",
    },
    {
        question: "Do you provide free estimates?",
        answer: "Yes, we provide free estimates for all services. Just give us a call or stop by the shop.",
    },
];
---

<BaseLayout
    brand={mobileTiresBrand}
    title={title}
    description={description}
    faqData={faqs}
>
    <!-- Hero Section -->
    <section class="pt-32 pb-16 md:pt-44 md:pb-24">
        <div class="site-canvas">
            <div class="grid lg:grid-cols-2 gap-16 lg:gap-20 items-start">
                <!-- Left: Heading + Contact Card -->
                <div>
                    <span
                        class="inline-block text-queens-secondary text-sm font-bold uppercase tracking-widest mb-4"
                    >
                        Contact Us
                    </span>
                    <h1
                        class="display-hero-page text-queens-primary dark:text-white mb-6"
                    >
                        Get in touch<br />with us.
                    </h1>
                    <p
                        class="text-lg text-gray-600 dark:text-gray-400 mb-10 max-w-md leading-relaxed"
                    >
                        Have a question or need help? Send us a message and
                        we'll get back to you as soon as possible.
                    </p>

                    <!-- Dark Contact Info Card -->
                    <div
                        class="contact-card bg-queens-primary rounded-2xl p-8 text-white"
                    >
                        <div class="space-y-5">
                            <div class="flex items-start gap-4">
                                <div class="contact-icon">
                                    <svg
                                        class="w-5 h-5"
                                        fill="none"
                                        stroke="currentColor"
                                        viewBox="0 0 24 24"
                                    >
                                        <path
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            stroke-width="2"
                                            d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                                        ></path>
                                    </svg>
                                </div>
                                <div>
                                    <p
                                        class="text-white/60 text-xs uppercase tracking-wider mb-1"
                                    >
                                        Email
                                    </p>
                                    <a
                                        href="mailto:info@queensautoservices.com"
                                        class="text-white font-medium hover:text-queens-secondary transition-colors"
                                    >
                                        info@queensautoservices.com
                                    </a>
                                </div>
                            </div>

                            <div class="flex items-start gap-4">
                                <div class="contact-icon">
                                    <svg
                                        class="w-5 h-5"
                                        fill="none"
                                        stroke="currentColor"
                                        viewBox="0 0 24 24"
                                    >
                                        <path
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            stroke-width="2"
                                            d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
                                        ></path>
                                    </svg>
                                </div>
                                <div>
                                    <p
                                        class="text-white/60 text-xs uppercase tracking-wider mb-1"
                                    >
                                        Phone
                                    </p>
                                    <a
                                        href="tel:2246353000"
                                        class="text-white font-medium hover:text-queens-secondary transition-colors"
                                    >
                                        (224) 635-3000
                                    </a>
                                </div>
                            </div>

                            <div class="flex items-start gap-4">
                                <div class="contact-icon">
                                    <svg
                                        class="w-5 h-5"
                                        fill="none"
                                        stroke="currentColor"
                                        viewBox="0 0 24 24"
                                    >
                                        <path
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            stroke-width="2"
                                            d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
                                        ></path>
                                        <path
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            stroke-width="2"
                                            d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"
                                        ></path>
                                    </svg>
                                </div>
                                <div>
                                    <p
                                        class="text-white/60 text-xs uppercase tracking-wider mb-1"
                                    >
                                        Address
                                    </p>
                                    <p class="text-white font-medium">
                                        1303 Dundee Ave, Elgin, IL 60120
                                    </p>
                                </div>
                            </div>

                            <div class="flex items-start gap-4">
                                <div class="contact-icon">
                                    <svg
                                        class="w-5 h-5"
                                        fill="none"
                                        stroke="currentColor"
                                        viewBox="0 0 24 24"
                                    >
                                        <path
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            stroke-width="2"
                                            d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
                                        ></path>
                                    </svg>
                                </div>
                                <div>
                                    <p
                                        class="text-white/60 text-xs uppercase tracking-wider mb-1"
                                    >
                                        Hours
                                    </p>
                                    <p class="text-white font-medium">
                                        Mon-Fri: 7:30 AM - 6:00 PM<br />
                                        Sat: 7:30 AM - 4:00 PM<br />
                                        <span class="text-white/60"
                                            >Sun: Closed</span
                                        >
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right: Simple Form -->
                <div
                    class="form-card bg-white dark:bg-white/5 rounded-2xl p-8 md:p-10 shadow-xl border border-gray-100 dark:border-white/10"
                >
                    <h2
                        class="text-xl font-bold text-queens-primary dark:text-white mb-6"
                    >
                        Send us a message
                    </h2>
                    <form id="contact-form" class="space-y-6">
                        <div>
                            <label
                                for="name"
                                class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"
                            >
                                Your Name
                            </label>
                            <input
                                type="text"
                                name="name"
                                id="name"
                                required
                                class="contact-input"
                                placeholder="John Doe"
                            />
                        </div>

                        <div>
                            <label
                                for="email"
                                class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"
                            >
                                Email Address
                            </label>
                            <input
                                type="email"
                                name="email"
                                id="email"
                                required
                                class="contact-input"
                                placeholder="john@example.com"
                            />
                        </div>

                        <div>
                            <label
                                for="message"
                                class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"
                            >
                                Message
                            </label>
                            <textarea
                                name="message"
                                id="message"
                                rows="5"
                                required
                                class="contact-input resize-none"
                                placeholder="How can we help you?"></textarea>
                        </div>

                        <button
                            type="submit"
                            id="contact-submit"
                            class="btn-primary w-full flex items-center justify-center gap-2 transition-all"
                        >
                            <span>Send Message</span>
                        </button>

                        <div
                            id="contact-feedback"
                            class="hidden text-sm text-center p-3 rounded-lg"
                        >
                        </div>

                        <p
                            class="text-xs text-gray-500 dark:text-gray-400 text-center"
                        >
                            Need to book an appointment? <a
                                href="/request-an-appointment"
                                class="text-queens-secondary hover:underline font-medium"
                                >Schedule here</a
                            >
                        </p>
                    </form>

                    <script is:inline>
                        const contactForm =
                            document.getElementById("contact-form");
                        const contactSubmit =
                            document.getElementById("contact-submit");
                        const contactFeedback =
                            document.getElementById("contact-feedback");

                        if (contactForm) {
                            contactForm.addEventListener(
                                "submit",
                                async (e) => {
                                    e.preventDefault();

                                    // Reset feedback
                                    contactFeedback.classList.add("hidden");
                                    contactFeedback.classList.remove(
                                        "bg-green-500/10",
                                        "text-green-600",
                                        "bg-red-500/10",
                                        "text-red-600",
                                    );

                                    // Loading state
                                    const originalBtnText =
                                        contactSubmit.innerHTML;
                                    contactSubmit.disabled = true;
                                    contactSubmit.innerHTML = `
                                    <svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                    </svg>
                                    <span>Sending...</span>
                                `;

                                    const formData = new FormData(contactForm);
                                    const data = Object.fromEntries(
                                        formData.entries(),
                                    );

                                    const webhookData = {
                                        ...data,
                                        event_name: "contact_form_submission",
                                        source_url: window.location.href,
                                        timestamp: new Date().toISOString(),
                                    };

                                    try {
                                        const response = await fetch(
                                            "https://n8n.queensautoservices.com/webhook-test/6e74632a-1fc8-4ff8-9465-ae6ed1c0c4ae",
                                            {
                                                method: "POST",
                                                headers: {
                                                    "Content-Type":
                                                        "application/json",
                                                },
                                                body: JSON.stringify(
                                                    webhookData,
                                                ),
                                            },
                                        );

                                        if (response.ok) {
                                            contactFeedback.textContent =
                                                "Message sent successfully! We will get back to you soon.";
                                            contactFeedback.classList.add(
                                                "bg-green-500/10",
                                                "text-green-600",
                                            );
                                            contactFeedback.classList.remove(
                                                "hidden",
                                            );
                                            contactForm.reset();
                                        } else {
                                            throw new Error(
                                                "Failed to send message",
                                            );
                                        }
                                    } catch (error) {
                                        console.error(
                                            "Submission Error:",
                                            error,
                                        );
                                        contactFeedback.textContent =
                                            "Something went wrong. Please try again or call us.";
                                        contactFeedback.classList.add(
                                            "bg-red-500/10",
                                            "text-red-600",
                                        );
                                        contactFeedback.classList.remove(
                                            "hidden",
                                        );
                                    } finally {
                                        contactSubmit.disabled = false;
                                        contactSubmit.innerHTML =
                                            originalBtnText;
                                    }
                                },
                            );
                        }
                    </script>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section class="py-20 lg:py-28 bg-gray-50 dark:bg-white/5">
        <div class="site-canvas">
            <div class="grid lg:grid-cols-5 gap-12 lg:gap-16">
                <!-- Left: Heading -->
                <div class="lg:col-span-2">
                    <span
                        class="inline-block text-queens-secondary text-sm font-bold uppercase tracking-widest mb-4"
                    >
                        FAQs
                    </span>
                    <h2
                        class="display-md text-queens-primary dark:text-white mb-6"
                    >
                        Got a question?<br />We've got answers.
                    </h2>
                </div>

                <!-- Right: Accordion -->
                <div class="lg:col-span-3">
                    <FaqAccordion faqs={faqs} />
                </div>
            </div>

            <!-- Still have questions CTA -->
            <div
                class="mt-16 pt-12 border-t border-gray-200 dark:border-white/10"
            >
                <div
                    class="still-questions-card bg-queens-primary rounded-2xl p-8 md:p-10 inline-flex flex-col items-start"
                >
                    <h3 class="text-xl font-bold text-white mb-4">
                        Still have questions?
                    </h3>
                    <a
                        href="tel:2246353000"
                        class="inline-flex items-center gap-2 text-white/80 hover:text-white transition-colors group"
                    >
                        <span>Call us</span>
                        <svg
                            class="w-4 h-4 group-hover:translate-x-1 transition-transform"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </section>
</BaseLayout>

<style>
    .contact-icon {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 2.5rem;
        height: 2.5rem;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 0.75rem;
        color: #0a79c8;
        flex-shrink: 0;
    }

    .contact-input {
        display: block;
        width: 100%;
        padding: 0.875rem 1rem;
        border-radius: 0.75rem;
        border: 1px solid #e5e7eb;
        background: #ffffff;
        color: #0b1121;
        font-size: 0.875rem;
        transition: all 0.2s;
    }

    .contact-input:focus {
        outline: none;
        border-color: #0a79c8;
        box-shadow: 0 0 0 3px rgba(10, 121, 200, 0.1);
    }

    .contact-input::placeholder {
        color: #9ca3af;
    }

    :global(.dark) .contact-input {
        background: rgba(255, 255, 255, 0.05);
        border-color: rgba(255, 255, 255, 0.1);
        color: #ffffff;
    }

    :global(.dark) .contact-input:focus {
        border-color: #0a79c8;
        box-shadow: 0 0 0 3px rgba(10, 121, 200, 0.2);
    }

    :global(.dark) .contact-input::placeholder {
        color: #6b7280;
    }
    .still-questions-card {
        box-shadow: 0 25px 50px -12px rgba(11, 17, 33, 0.25);
    }
</style>
