---
import BaseLayout from "../../../layouts/BaseLayout.astro";
import { mobileTiresBrand } from "../../../brands";
import servicesData from "../../../data/services.json";
import SmoothReveal from "../../../components/SmoothReveal.astro";
import CtaButtonSecondary from "../../../components/CtaButtonSecondary.astro";
import SpeedometerCTA from "../../../components/SpeedometerCTA.astro";

export async function getStaticPaths() {
    const paths: any[] = [];

    // servicesData is an array of categories
    for (const category of servicesData) {
        for (const service of category.services) {
            paths.push({
                params: {
                    category: category.slug,
                    service: service.slug,
                },
                props: {
                    category,
                    service,
                },
            });
        }
    }

    return paths;
}

const { category, service } = Astro.props;
const title = `${service.title} | Queens Mobile Tires`;
const description = `Professional ${service.title} services in the Chicago area. We come to you for all your ${category.title.toLowerCase()} needs.`;
---

<BaseLayout brand={mobileTiresBrand} title={title} headerInverse={true}>
    <!-- Hero Section with "Card" look -->
    <div class="px-2 pt-1 pb-8 sm:px-4 sm:pt-2">
        <div
            class="relative w-full h-[60vh] min-h-[500px] rounded-3xl overflow-hidden shadow-2xl"
        >
            <!-- Background Image -->
            <img
                src="/images/shop/Queens-Auto-Services-Elgin-a-view-from-outside.webp"
                alt="Shop View"
                class="absolute inset-0 w-full h-full object-cover"
            />
            <!-- Gradient Overlay -->
            <div
                class="absolute inset-0 bg-gradient-to-t from-slate-950/90 via-slate-900/50 to-slate-900/10 mix-blend-multiply"
            >
            </div>

            <!-- Content Overlay -->
            <div
                class="absolute inset-0 flex flex-col justify-end p-8 sm:p-12 lg:p-20"
            >
                <div
                    class="max-w-7xl mx-auto w-full flex flex-col lg:flex-row lg:items-end justify-between gap-8"
                >
                    <!-- Title Section -->
                    <div class="max-w-2xl">
                        <nav
                            class="flex gap-2 text-sm font-medium text-white/80 mb-4 uppercase tracking-wider items-center animate-fade-up"
                        >
                            <a
                                href="/services/"
                                class="hover:text-white transition-colors text-white"
                                >Services</a
                            >
                            <span class="text-white/60">/</span>
                            <a
                                href={`/services/${category.slug}/`}
                                class="hover:text-white transition-colors text-white"
                                >{category.title}</a
                            >
                        </nav>
                        <h3
                            class="text-4xl md:text-5xl font-bold text-white tracking-tight drop-shadow-md animate-fade-up delay-100"
                        >
                            {service.title}
                        </h3>
                    </div>

                    <!-- Description Section (Right aligned on desktop) -->
                    <div
                        class="max-w-xl text-white text-lg sm:text-xl font-light border-l-4 border-queens-secondary pl-6 drop-shadow-sm animate-fade-up delay-200"
                    >
                        Looking for {service.title}? Queens Mobile Tires brings
                        the shop to you. Access our professional {
                            category.title.toLowerCase()
                        } without leaving your home or office.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content Below Hero -->
    <div class="mx-auto max-w-7xl px-6 lg:px-8 py-16 sm:py-24" data-reveal>
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-12 lg:gap-16">
            <!-- Left Column: Main Service Content -->
            <div class="lg:col-span-2" data-reveal-item>
                <div
                    class="prose prose-lg prose-slate dark:prose-invert max-w-none mb-12"
                >
                    <p class="lead text-xl text-gray-600 dark:text-gray-300">
                        Experience the ultimate convenience with our
                        professional {service.title} service. We bring the tire shop
                        directly to your driveway or parking spot, saving you hours
                        of time.
                    </p>
                </div>

                <div
                    class="bg-gray-50 dark:bg-white/5 rounded-2xl p-8 border border-gray-100 dark:border-white/10 mb-10"
                >
                    <h2
                        class="text-2xl font-bold text-gray-900 dark:text-white mb-6"
                    >
                        Why Choose Mobile Service?
                    </h2>
                    <ul class="space-y-6">
                        <li class="flex gap-x-4">
                            <div
                                class="flex-none rounded-full bg-queens-secondary/10 p-1 text-queens-secondary"
                            >
                                <svg
                                    class="h-6 w-6"
                                    fill="none"
                                    viewBox="0 0 24 24"
                                    stroke-width="1.5"
                                    stroke="currentColor"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        d="M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"
                                    ></path>
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"
                                    ></path>
                                </svg>
                            </div>
                            <span class="text-gray-600 dark:text-gray-300"
                                ><strong
                                    class="font-semibold text-gray-900 dark:text-white"
                                    >We Come To You:</strong
                                > Skip the shop waiting room. We service your vehicle
                                at your home or office.</span
                            >
                        </li>
                        <li class="flex gap-x-4">
                            <div
                                class="flex-none rounded-full bg-queens-secondary/10 p-1 text-queens-secondary"
                            >
                                <svg
                                    class="h-6 w-6"
                                    fill="none"
                                    viewBox="0 0 24 24"
                                    stroke-width="1.5"
                                    stroke="currentColor"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        d="M9 12.75 11.25 15 15 9.75M21 12c0 5.523-4.477 10-10 10S1 17.523 1 12 5.477 2 11 2s10 4.477 10 10Z"
                                    ></path>
                                </svg>
                            </div>
                            <span class="text-gray-600 dark:text-gray-300"
                                ><strong
                                    class="font-semibold text-gray-900 dark:text-white"
                                    >Certified Technicians:</strong
                                > Our team is fully trained and equipped with professional-grade
                                tools.</span
                            >
                        </li>
                        <li class="flex gap-x-4">
                            <div
                                class="flex-none rounded-full bg-queens-secondary/10 p-1 text-queens-secondary"
                            >
                                <svg
                                    class="h-6 w-6"
                                    fill="none"
                                    viewBox="0 0 24 24"
                                    stroke-width="1.5"
                                    stroke="currentColor"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"
                                    ></path>
                                </svg>
                            </div>
                            <span class="text-gray-600 dark:text-gray-300"
                                ><strong
                                    class="font-semibold text-gray-900 dark:text-white"
                                    >Save Time:</strong
                                > Our process is faster and more convenient than traditional
                                tire shops.</span
                            >
                        </li>
                    </ul>
                </div>

                <div class="flex flex-wrap gap-4">
                    <a href="/contact" class="btn-primary"
                        >Request Appointment</a
                    >
                    <a href="tel:847-925-1100" class="btn-secondary"
                        >Call (847) 925-1100</a
                    >
                </div>
            </div>

            <!-- Right Column: Deals & Specials Sidebar -->
            <div class="lg:col-span-1 space-y-6">
                <div class="sticky top-24 space-y-6">
                    <h3
                        class="text-lg font-bold text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-800 pb-2"
                        data-reveal-item
                    >
                        Current Specials
                    </h3>

                    <!-- Banner 1: Auto Repair -->
                    <a
                        href="https://queensautoserviceselgin.com/auto-repair-landing-page/?banner=sidebar_auto_repair_01"
                        target="_blank"
                        rel="noopener noreferrer"
                        class="block group relative w-full overflow-hidden rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1 bg-gray-100 dark:bg-white/5"
                        data-reveal-item
                    >
                        <img
                            src="/images/deals/Auto-Repair-Coupon-Banner-001.webp"
                            alt="Auto Repair Special Offer"
                            class="w-full h-auto object-cover"
                        />
                        <div
                            class="absolute inset-0 bg-black/0 group-hover:bg-white/10 transition-colors duration-300"
                        >
                        </div>
                    </a>

                    <!-- Banner 2: Brakes -->
                    <a
                        href="https://queensautoserviceselgin.com/brakes/booking.htm?banner=sidebar_brakes_01"
                        target="_blank"
                        rel="noopener noreferrer"
                        class="block group relative w-full overflow-hidden rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1 bg-gray-100 dark:bg-slate-800"
                        data-reveal-item
                    >
                        <img
                            src="/images/deals/Brake-Soecial-Banner-001.webp"
                            alt="Brake Service Special Offer"
                            loading="lazy"
                            class="w-full h-auto object-cover"
                        />
                        <div
                            class="absolute inset-0 bg-black/0 group-hover:bg-white/10 transition-colors duration-300"
                        >
                        </div>
                    </a>

                    <!-- Banner 3: Alignment -->
                    <a
                        href="https://queensautoserviceselgin.com/wheel-alignment/special-offer.htm?banner=sidebar_alignment_01"
                        target="_blank"
                        rel="noopener noreferrer"
                        class="block group relative w-full overflow-hidden rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1 bg-gray-100 dark:bg-slate-800"
                        data-reveal-item
                    >
                        <img
                            src="/images/deals/Wheel-Alignment-Banner-001.webp"
                            alt="Wheel Alignment Special Offer"
                            loading="lazy"
                            class="w-full h-auto object-cover"
                        />
                        <div
                            class="absolute inset-0 bg-black/0 group-hover:bg-white/10 transition-colors duration-300"
                        >
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <!-- Image Grid Section -->
    <div class="mx-auto max-w-7xl px-6 lg:px-8 pb-16 sm:pb-24" data-reveal>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <!-- Image 1 -->
            <div
                class="aspect-[4/3] w-full overflow-hidden rounded-2xl bg-gray-100 dark:bg-white/5 shadow-sm"
                data-reveal-item
            >
                <img
                    src="/images/services/Queens-Auto-repair.webp"
                    alt="Queens Auto Repair"
                    class="w-full h-full object-cover hover:scale-105 transition-transform duration-500"
                    loading="lazy"
                    onerror="this.src='https://placehold.co/600x400/1e293b/white?text=Auto+Repair'"
                />
            </div>
            <!-- Image 2 -->
            <div
                class="aspect-[4/3] w-full overflow-hidden rounded-2xl bg-gray-100 dark:bg-slate-800 shadow-sm"
                data-reveal-item
            >
                <img
                    src="/images/services/Queens-Auto-Services-Elgin-Auto-Repair-001.webp"
                    alt="Auto Services Elgin"
                    class="w-full h-full object-cover hover:scale-105 transition-transform duration-500"
                    loading="lazy"
                    onerror="this.src='https://placehold.co/600x400/1e293b/white?text=Service+Bay'"
                />
            </div>
            <!-- Image 3 -->
            <div
                class="aspect-[4/3] w-full overflow-hidden rounded-2xl bg-gray-100 dark:bg-slate-800 shadow-sm"
                data-reveal-item
            >
                <img
                    src="/images/services/Queens-Auto-Auto-Repair-005.webp"
                    alt="Auto Repair Service"
                    class="w-full h-full object-cover hover:scale-105 transition-transform duration-500"
                    loading="lazy"
                    onerror="this.src='https://placehold.co/600x400/1e293b/white?text=Repair+Shop'"
                />
            </div>
        </div>
    </div>

    <!-- FAQ Section -->
    <div class="py-16 sm:py-24" data-reveal>
        <div class="mx-auto max-w-7xl px-6 lg:px-8">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-12 lg:gap-16">
                <!-- FAQ Header (Left Column) -->
                <div class="lg:col-span-1 reveal-hidden" data-reveal-item>
                    <h5
                        class="font-bold tracking-tight text-gray-900 dark:text-white mb-4"
                    >
                        Frequently Asked Questions
                    </h5>
                    <p
                        class="text-lg leading-8 text-gray-600 dark:text-gray-300"
                    >
                        Have questions about our {service.title}? Here are some
                        common queries from our customers.
                    </p>
                </div>

                <!-- FAQ Items (Right Column) -->
                <div class="lg:col-span-2 space-y-4">
                    <!-- Q1 -->
                    <details
                        class="group bg-white dark:bg-white/5 dark:border dark:border-white/10 rounded-2xl px-8 py-4 [&_summary::-webkit-details-marker]:hidden shadow-sm reveal-hidden"
                        data-reveal-item
                    >
                        <summary
                            class="rich-text flex items-center justify-between cursor-pointer list-none text-gray-900 dark:text-white font-semibold"
                        >
                            <h5
                                class="inline-block !m-0 text-gray-900 dark:text-white"
                            >
                                How long does the service take?
                            </h5>
                            <span class="transition group-open:rotate-180">
                                <svg
                                    fill="none"
                                    viewBox="0 0 24 24"
                                    stroke-width="1.5"
                                    stroke="currentColor"
                                    class="w-6 h-6"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path>
                                </svg>
                            </span>
                        </summary>
                        <div
                            class="text-gray-600 dark:text-gray-300 mt-3 leading-relaxed"
                        >
                            Most services are completed within 45-60 minutes.
                            Our technician will provide a more accurate estimate
                            upon arrival.
                        </div>
                    </details>

                    <!-- Q2 -->
                    <details
                        class="group bg-white dark:bg-slate-800 rounded-2xl px-8 py-4 [&_summary::-webkit-details-marker]:hidden shadow-sm reveal-hidden"
                        data-reveal-item
                    >
                        <summary
                            class="rich-text flex items-center justify-between cursor-pointer list-none text-gray-900 dark:text-white font-semibold"
                        >
                            <h5
                                class="inline-block !m-0 text-gray-900 dark:text-white"
                            >
                                Do I need to be present?
                            </h5>
                            <span class="transition group-open:rotate-180">
                                <svg
                                    fill="none"
                                    viewBox="0 0 24 24"
                                    stroke-width="1.5"
                                    stroke="currentColor"
                                    class="w-6 h-6"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path>
                                </svg>
                            </span>
                        </summary>
                        <div
                            class="text-gray-600 dark:text-gray-300 mt-3 leading-relaxed"
                        >
                            You only need to be present to unlock the vehicle
                            (if needed) and hand over the keys. You can relax
                            inside while we work.
                        </div>
                    </details>

                    <!-- Q3 -->
                    <details
                        class="group bg-white dark:bg-slate-800 rounded-2xl px-8 py-4 [&_summary::-webkit-details-marker]:hidden shadow-sm reveal-hidden"
                        data-reveal-item
                    >
                        <summary
                            class="rich-text flex items-center justify-between cursor-pointer list-none text-gray-900 dark:text-white font-semibold"
                        >
                            <h5
                                class="inline-block !m-0 text-gray-900 dark:text-white"
                            >
                                Is there a warranty?
                            </h5>
                            <span class="transition group-open:rotate-180">
                                <svg
                                    fill="none"
                                    viewBox="0 0 24 24"
                                    stroke-width="1.5"
                                    stroke="currentColor"
                                    class="w-6 h-6"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path>
                                </svg>
                            </span>
                        </summary>
                        <div
                            class="text-gray-600 dark:text-gray-300 mt-3 leading-relaxed"
                        >
                            Yes, we offer a warranty on both parts and labor.
                            Please ask your service advisor for specific details
                            regarding your service.
                        </div>
                    </details>

                    <!-- Q4 -->
                    <details
                        class="group bg-white dark:bg-slate-800 rounded-2xl px-8 py-4 [&_summary::-webkit-details-marker]:hidden shadow-sm reveal-hidden"
                        data-reveal-item
                    >
                        <summary
                            class="rich-text flex items-center justify-between cursor-pointer list-none text-gray-900 dark:text-white font-semibold"
                        >
                            <h5
                                class="inline-block !m-0 text-gray-900 dark:text-white"
                            >
                                Do you service all makes and models?
                            </h5>
                            <span class="transition group-open:rotate-180">
                                <svg
                                    fill="none"
                                    viewBox="0 0 24 24"
                                    stroke-width="1.5"
                                    stroke="currentColor"
                                    class="w-6 h-6"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        d="M19.5 8.25l-7.5 7.5-7.5-7.5"></path>
                                </svg>
                            </span>
                        </summary>
                        <div
                            class="text-gray-600 dark:text-gray-300 mt-3 leading-relaxed"
                        >
                            We service most domestic and foreign vehicles. If
                            you have a specialty or exotic vehicle, please call
                            us to confirm.
                        </div>
                    </details>
                </div>
            </div>
        </div>
    </div>

    <!-- CTA Section with CSS-Only Scroll Reveal (Kevin Powell technique) -->
    <!-- CTA Section with Speedometer Visual -->
    <SpeedometerCTA />

    <!-- Include the SmoothReveal animation system -->
    <SmoothReveal />

    <!-- JavaScript Scroll-Driven Animation (works in all browsers) -->
    <script is:inline>
        (function () {
            function initScrollReveal() {
                var section = document.querySelector(".scroll-reveal");
                if (!section || section.getAttribute("data-scroll-init"))
                    return;
                section.setAttribute("data-scroll-init", "true");

                var spans = section.querySelectorAll("span");
                var button = section.querySelector(".cta-button-reveal");

                function updateOnScroll() {
                    var rect = section.getBoundingClientRect();
                    var windowHeight = window.innerHeight;

                    // Calculate progress (0 to 1) based on element position
                    // Start when top is at 80% of viewport, end when top is at 20%
                    var start = windowHeight * 0.8;
                    var end = windowHeight * 0.2;
                    var progress = (start - rect.top) / (start - end);
                    progress = Math.min(1, Math.max(0, progress));

                    // Update each span's background-size
                    spans.forEach(function (span, index) {
                        // Stagger: each span starts slightly later
                        var staggeredProgress = (progress - index * 0.1) / 0.6;
                        staggeredProgress = Math.min(
                            1,
                            Math.max(0, staggeredProgress),
                        );
                        var size = staggeredProgress * 100;
                        span.style.backgroundSize = size + "% 100%";
                    });

                    // Fade in button
                    if (button) {
                        var buttonProgress = (progress - 0.4) / 0.4;
                        buttonProgress = Math.min(
                            1,
                            Math.max(0, buttonProgress),
                        );
                        button.style.opacity = buttonProgress;
                        button.style.transform =
                            "translateY(" + (20 - buttonProgress * 20) + "px)";
                    }
                }

                // Listen to scroll
                window.addEventListener("scroll", updateOnScroll, {
                    passive: true,
                });
                // Initial call
                updateOnScroll();
            }

            // Run on page load and View Transitions
            document.addEventListener("astro:page-load", initScrollReveal);

            if (document.readyState === "loading") {
                document.addEventListener("DOMContentLoaded", initScrollReveal);
            } else {
                initScrollReveal();
            }
        })();
    </script>

    <style>
        /* CSS-Only Scroll Reveal Theme Variables */
        .scroll-reveal {
            /* Light Mode Default */
            --reveal-text-dim: hsl(0 0% 50% / 0.25); /* Faint Gray */
            --reveal-text-bright: #111827; /* Deep Black */
        }

        /* 
           Use :global(.dark) because the .dark class is on the <html> element, 
           outside this component's scope. 
        */
        :global(.dark) .scroll-reveal {
            /* Dark Mode Inverse */
            --reveal-text-dim: hsl(
                0 0% 100% / 0.4
            ); /* Soft White/Gray (Increased visibility) */
            --reveal-text-bright: #ffffff; /* Pure White */
        }

        /* Scroll Reveal Effect */
        .scroll-reveal span {
            /* Unrevealed state (Dim) */
            color: var(--reveal-text-dim);

            /* Revealed state (Bright) applied via background gradient */
            background-image: linear-gradient(
                90deg,
                var(--reveal-text-bright),
                var(--reveal-text-bright)
            );

            /* Clip background to text shape */
            background-clip: text;
            -webkit-background-clip: text;

            /* Initial state - hidden reveal */
            background-repeat: no-repeat;
            background-size: 0% 100%;

            /* Smooth transition */
            transition: background-size 0.1s ease-out;
        }

        /* CTA button initial state */
        .cta-button-reveal {
            opacity: 0;
            transform: translateY(20px);
            transition:
                opacity 0.1s ease-out,
                transform 0.1s ease-out;
        }
    </style>

    <style>
        /* Hero animations - smooth, premium entrance */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(24px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fade-up {
            animation: fadeInUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
            opacity: 0;
        }

        /* Hero stagger delays - slower, more intentional */
        .delay-100 {
            animation-delay: 150ms;
        }
        .delay-200 {
            animation-delay: 300ms;
        }
        .delay-300 {
            animation-delay: 450ms;
        }
        .delay-400 {
            animation-delay: 600ms;
        }
    </style>
</BaseLayout>
