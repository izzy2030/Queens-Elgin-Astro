---
import reviews from "../data/reviews.json";

// Helper to get initials
const getInitials = (name: string) => {
  return name
    .split(' ')
    .map(word => word[0])
    .join('')
    .substring(0, 2)
    .toUpperCase();
};
---

<section class="py-24 overflow-hidden relative">
  <!-- Background decoration -->
  <div class="absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none">
    <div class="absolute top-0 right-0 w-[500px] h-[500px] bg-[var(--color-queens-secondary)]/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"></div>
    <div class="absolute bottom-0 left-0 w-[500px] h-[500px] bg-[var(--color-queens-primary)]/5 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"></div>
  </div>

  <div class="site-canvas relative z-10">
    
    <!-- Section Header -->
    <div class="text-center mb-16">
      <h2 class="display-lg text-queens-primary dark:text-white mb-4">
        What Our <span class="text-queens-secondary font-serif italic">Customers Say</span>
      </h2>
      <p class="text-xl text-gray-600 dark:text-gray-400 max-w-2xl mx-auto font-light">
        Real reviews from real customers in Northern Illinois.
      </p>
    </div>

    <!-- Testimonials Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {reviews.map((review) => (
        <div class="bg-gray-50 dark:bg-white/5 dark:border dark:border-white/10 p-8 rounded-3xl hover:shadow-xl transition-all duration-300 border border-gray-100 dark:border-white/10 flex flex-col h-full group">
          
          <!-- Stars -->
          <div class="flex gap-1 mb-6 text-queens-secondary">
            {Array.from({ length: review.stars }).map(() => (
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
                <path fill-rule="evenodd" d="M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.006z" clip-rule="evenodd" />
              </svg>
            ))}
          </div>

          <!-- Quote -->
          <blockquote class="text-gray-700 dark:text-gray-300 leading-relaxed mb-8 flex-grow font-medium">
            "{review.text}"
          </blockquote>

          <!-- User Info -->
          <div class="flex items-center gap-4 mt-auto pt-6 border-t border-gray-200/60 dark:border-white/10">
            {review.image ? (
              <img 
                src={review.image} 
                alt={review.name}
                class="w-12 h-12 rounded-full object-cover shadow-md transition-transform duration-300 group-hover:scale-110"
              />
            ) : (
              <div class="w-12 h-12 rounded-full bg-[var(--color-queens-primary)] text-white flex items-center justify-center font-bold text-sm tracking-wider shadow-md group-hover:bg-queens-secondary transition-colors duration-300">
                {getInitials(review.name)}
              </div>
            )}
            <div>
              <div class="font-bold text-[var(--color-queens-primary)] dark:text-white">{review.name}</div>
              <div class="text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-3 h-3">
                  <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 6a.75.75 0 00-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 000-1.5h-3.75V6z" clip-rule="evenodd" />
                </svg>
                {review.source}
              </div>
            </div>
          </div>

        </div>
      ))}
    </div>

  </div>
</section>
